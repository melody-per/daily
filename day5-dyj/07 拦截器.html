<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Honey!â¤ğŸˆ</title>
    <link rel='icon' href='../../favicon/favicon.ico'>
    <link rel="stylesheet" href="./lib/Vue.css">

    <!-- .FIXME: å¯¼å…¥ fundebug.js   -->
    <script src="https://js.fundebug.cn/fundebug.2.0.0.min.js" apikey="9b69babcb4dc097955cd50f5cb763201d3c2d32c40eecd8dfdc8cb2d360f3489" crossorigin="anonymous"></script>

    <script src="./lib/Vue.js"></script>
    <script src="./node_modules/axios/dist/axios.js"></script>


</head>

<body>

    <div id="app">
        <h3>æ‹¦æˆªå™¨</h3>
        <button @click='add'>å¢åŠ </button>


    </div>

    <script>
        //.TODO: æ·»åŠ ä¸€ä¸ª baseURL åé¢å‘èµ·è¯·æ±‚ å¯ä»¥çœç•¥   http://localhost:3000/
        axios.defaults.baseURL = 'http://localhost:3000/';

        //.TODO: ä¸€èˆ¬æ·»åŠ ä¸€ä¸ªèº«ä»½ä»¤ç‰Œ
        // axios.defaults.headers.common['Authorization'] = '111'


        // æˆ‘ä»¬æ¯æ¬¡å‘é€çš„è¯·æ±‚æˆ–è€…å“åº”éƒ½ä¼šè¢«axiosçš„æ‹¦æˆªå™¨æ‰€ç›‘å¬åˆ°
        // åœ¨ axios è¯·æ±‚æˆåŠŸ,è¿”å›çš„ç»“æœä¸­,æˆ‘ä»¬è¦çš„ç»“æœè¢«åŒ…å«åœ¨ data çš„å­—æ®µä¸­,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å“åº”æ‹¦æˆªå™¨,å°†æ•°æ®å‰¥ç¦»å‡ºæ¥

        //.TODO: è¯·æ±‚æ‹¦æˆªå™¨ å‘é€è¯·æ±‚ä¹‹å‰ä¼šè¿›å…¥è¯·æ±‚æ‹¦æˆªå™¨
        axios.interceptors.request.use(function(config) {

            console.log(`%c è¿›å…¥è¯·æ±‚æ‹¦æˆªå™¨`, 'color:#89CFF0');

            return config;

        }, function(error) {

            return Promise.reject(error);
        });

        //.TODO: å“åº”æ‹¦æˆªå™¨ å“åº”ä¹‹å‰ä¼šè¿›å…¥å“åº”æ‹¦æˆªå™¨
        axios.interceptors.response.use(function(res) {

            // åœ¨å“åº”æ‹¦æˆªå™¨ä¸­ å°†dataå‰¥ç¦»å‡ºæ¥,è¿™æ ·åœ¨åé¢è·å–æ•°æ®æ—¶ æ‰“å° reså°±æ˜¯ç›´æ¥è¿”å› dataæ•°æ®
            console.log(`%c è¿›å…¥å“åº”æ‹¦æˆªå™¨`, 'color:#ff6100');

            return res.data;

        }, function(error) {

            return Promise.reject(error);
        });


        //.FIXME: 1.å®‰è£… json-server  npm i json-server -g
        //.TODO: 2.åˆ›å»º girls.json
        // TODO 3.json-server  --watch girls.json å°±å¯ä»¥è®¿é—® localhost:3000/girls åœ°å€ json-server å¸®æˆ‘ä»¬å¼€å¯çš„æœåŠ¡

        //.TODO:  Promise.then  å¯ä»¥è·å–ç»“æœ



        //å»é™¤æ§åˆ¶å°å¤æ‚ä¿¡æ¯
        Vue.config.productionTip = false;


        // åˆ›å»ºä¸€ä¸ª  vue å®ä¾‹
        const vm = new Vue({
            el: '#app',
            data: {
                list: []
            },

            methods: {
                //.FIXME: axios å¢åŠ 
                add() {

                    // å‘é€ axios postè¯·æ±‚ (æ·»åŠ æ•°æ®) æ·»åŠ ä¸€é¡¹ æ•°æ®(éœ€è¦æºå¸¦ name å‚æ•°, idå¯ä»¥ä¸å†™è‡ªå¢)
                    axios.post('girls', {
                        name: 'å°å¨Ÿ'
                    }).then(res => {
                        console.log(res);
                    })


                },
            },

            //.TODO:  åˆ©ç”¨é’©å­å‡½æ•° createds è·å–jsoné‡Œé¢çš„æ•°æ®
            created() {

                axios.get('girls').then(res => {

                    // TODO ä¸Šé¢æ·»åŠ æ‹¦æˆªå™¨å(å‰¥ç¦»dataæ•°æ®å)  åœ¨è¿™é‡Œæ‰“å°reså°±æ˜¯è¿”å›çš„ data æ•°æ®
                    this.list = res.data;
                })

            }

        })
    </script>
</body>

</html>